{% extends 'base.html' %}

{% block content %}
  <title>User Input</title>

  <form method="post" action="{% url 'add_hours' %}" id="inputHoursForm">
    {% csrf_token %}
    <div class="form-row">
      <label for="name">Enter Name:</label>
      <textarea id="names" name="names" required></textarea>
    </div>

    <div class="form-row">
      <label for="course">Enter Course:</label>
      <input type="text" id="course" name="course" required>
    </div>

    <div class="form-row">
      <label for="hours">Enter Hours:</label>
      <input type="number" id="hours" name="hours" step="0.01" required>
    </div>

    <div class="form-row checkboxes">
      <label for="inperson" class="checkbox-label">In-Person:</label>
      <input type="checkbox" id="inperson" name="inperson">
      <label for="total" class="checkbox-label">Total:</label>
      <input type="checkbox" id="total" name="total">
    </div>

    <div class="form-row">
      <label for="date">Enter Date:</label>
      <input type="date" id="date" name="date" required>
    </div>

    <button type="submit" onclick="submitNames()">Submit</button>
  </form>
  <script>
    function submitNames() {
      const namesInput = document.getElementById('names');
      const names = namesInput.value.split(',');
  
      names.forEach(name => {
        const formData = new FormData(document.getElementById('inputHoursForm'));
        formData.set('names', name.trim()); // Set each name in the form data
  
        fetch('{% url "add_hours" %}', {
          method: 'POST',
          body: formData
        })
        .then(response => {
          // Handle response as needed
          console.log(`Submitted ${name}`);
        })
        .catch(error => {
          console.error('Error:', error);
        });
      });
    }
  </script>
{% endblock %}
